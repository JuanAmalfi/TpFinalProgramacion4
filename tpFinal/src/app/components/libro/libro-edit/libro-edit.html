<div class="edit-wrapper">
  <div class="edit-card animate-pop">

    <h2 class="title">üìñ Editar Libro</h2>
    <p class="subtitle">Modific√° los datos y guard√° los cambios</p>

    <form [formGroup]="editForm" (ngSubmit)="onSave()" class="edit-form">

      <!-- T√≠tulo -->
      <div class="form-group" [class.invalid]="isInvalid('titulo')">
        <label>T√≠tulo *</label>
        <input type="text" formControlName="titulo" placeholder="Ej: El principito">
        @if (isInvalid('titulo')) { <small class="error">Campo obligatorio</small> }
      </div>

      <!-- Autor -->
      <div class="form-group" [class.invalid]="isInvalid('autor')">
        <label>Autor *</label>
        <input type="text" formControlName="autor" placeholder="Ej: Antoine de Saint-Exup√©ry">
        @if (isInvalid('autor')) { <small class="error">Campo obligatorio</small> }
      </div>

      <!-- A√±o -->
      <div class="form-group" [class.invalid]="isInvalid('anioPublicacion')">
        <label>A√±o de publicaci√≥n *</label>
        <input type="number" formControlName="anioPublicacion" placeholder="Ej: 1943">
        @if (isInvalid('anioPublicacion')) { 
          <small class="error">A√±o entre 1000 y 2100</small> }
      </div>

      <!-- G√©nero -->
      <div class="form-group" [class.invalid]="isInvalid('genero')">
        <label>G√©nero *</label>
        <select formControlName="genero">
          <option value="">Seleccione...</option>
          <option>Ficci√≥n</option>
          <option>No Ficci√≥n</option>
          <option>Ciencia Ficci√≥n</option>
          <option>Fantas√≠a</option>
          <option>Misterio</option>
          <option>Romance</option>
        </select>
        @if (isInvalid('genero')) { <small class="error">Seleccione g√©nero</small> }
      </div>

      <!-- Precio -->
      <div class="form-group" [class.invalid]="isInvalid('precio')">
        <label>Precio *</label>
        <input type="number" formControlName="precio" placeholder="Ej: 3500">
        @if (isInvalid('precio')) { <small class="error">Precio inv√°lido</small> }
      </div>

      <!-- Portada -->
      <div class="form-group">
        <label>Portada</label>
        <input type="file" accept="image/*" (change)="onFileSelected($event)">
        @if (portadaPreview) {
          <div class="preview fade-in">
            <img [src]="portadaPreview" alt="Vista previa" />
          </div>
        }
      </div>

      <!-- Descripci√≥n -->
      <div class="form-group">
        <label>Descripci√≥n</label>
        <textarea rows="3" formControlName="descripcion" placeholder="Descripci√≥n..."></textarea>
      </div>

      <!-- Disponible -->
      <label class="toggle">
        <input type="checkbox" formControlName="disponible">
        <span class="switch"></span>
        <span class="toggle-label">Disponible</span>
      </label>

      <!-- Botones -->
      <div class="actions">
        <button type="button" class="btn cancel" (click)="cancelar()">Cancelar</button>
        <button type="submit" class="btn save" [disabled]="editForm.invalid">Guardar cambios</button>
      </div>

    </form>
  </div>
</div>
