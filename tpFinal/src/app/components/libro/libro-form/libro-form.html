@if (isAdmin()) {

<div class="page-container">

  <div class="book-card animate-float">

    <h2 class="form-title"> Agregar Nuevo Libro</h2>
    <p class="form-subtitle">Complete la información requerida</p>

    <form [formGroup]="libroForm" (ngSubmit)="onSubmit()" class="form-body">

      <!-- Título -->
      <div class="form-group" [class.invalid]="isInvalid('titulo')">
        <label>Título *</label>
        <input type="text" formControlName="titulo" placeholder="Ej: El Señor de los Anillos">
        @if (isInvalid('titulo')) { <small class="error-msg">Campo obligatorio</small> }
      </div>

      <!-- Autor -->
      <div class="form-group" [class.invalid]="isInvalid('autor')">
        <label>Autor *</label>
        <input type="text" formControlName="autor" placeholder="Ej: Tolkien">
        @if (isInvalid('autor')) { <small class="error-msg">Campo obligatorio</small> }
      </div>

      <!-- Año -->
      <div class="form-group" [class.invalid]="isInvalid('anioPublicacion')">
        <label>Año *</label>
        <input type="number" formControlName="anioPublicacion" placeholder="Ej: 1954">
        @if (isInvalid('anioPublicacion')) { <small class="error-msg">1000 - 2025</small> }
      </div>

      <!-- Género -->
      <div class="form-group" [class.invalid]="isInvalid('genero')">
        <label>Género *</label>
        <select formControlName="genero">
          <option value="">Seleccione...</option>
          <option>Ficción</option>
          <option>No Ficción</option>
          <option>Ciencia Ficción</option>
          <option>Fantasía</option>
          <option>Misterio</option>
          <option>Romance</option>
        </select>
        @if (isInvalid('genero')) { <small class="error-msg">Seleccione género</small> }
      </div>

      <!-- Precio -->
      <div class="form-group" [class.invalid]="isInvalid('precio')">
        <label>Precio *</label>
        <input type="number" formControlName="precio" placeholder="Ej: 3500">
        @if (isInvalid('precio')) { <small class="error-msg">Campo obligatorio</small> }
      </div>

      <!-- Portada -->
      <div class="form-group">
        <label>Portada</label>
        <input type="file" accept="image/*" (change)="onFileSelected($event)">
        @if (portadaPreview) {
          <div class="preview fade-in">
            <img [src]="portadaPreview" alt="">
          </div>
        }
      </div>

      <!-- Descripción -->
      <div class="form-group">
        <label>Descripción</label>
        <textarea rows="3" formControlName="descripcion"></textarea>
      </div>

      <!-- Disponible -->
      <label class="toggle">
        <input type="checkbox" formControlName="disponible">
        <span class="switch"></span>
        <span class="toggle-label">Disponible</span>
      </label>

      <!-- Botones -->
      <div class="actions">
        <button type="button" class="btn cancel" (click)="onCancel()">Cancelar</button>
        <button type="submit" class="btn submit" [disabled]="libroForm.invalid">Guardar</button>
      </div>

    </form>

  </div>
</div>

} @else {

<div class="access-denied-container animate-fade">
  <h2>⛔ Acceso Denegado</h2>
  <p>Solo administradores pueden agregar libros.</p>
  <button (click)="goBack()" class="go-back">Volver</button>
</div>

}
