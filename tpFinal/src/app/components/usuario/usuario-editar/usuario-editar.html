<div class="perfil-container">

    @if (loading()) {
    <p class="loading-msg">Cargando información...</p>
    }

    @else {
    <div class="perfil-card fadeIn">

        <div class="avatar-profile">
            <span>{{ form.get('username')?.value?.charAt(0)?.toUpperCase() }}</span>
        </div>

        <h2 class="title">Editar Perfil</h2>

        <form [formGroup]="form" class="form-content">

            <div class="form-group">
                <label for="username">Nombre de usuario</label>
                <input id="username" type="text" formControlName="username" placeholder="Ej: JuanPérez" />
            </div>
            <h3 class="sub-title">Cambiar contraseña</h3>

            <div class="form-group">
                <label>Contraseña actual</label>
                <input type="password" formControlName="currentPassword" placeholder="******" />
            </div>

            <div class="form-group">
                <label>Nueva contraseña</label>
                <input type="password" formControlName="newPassword" placeholder="Mínimo 6 caracteres" />
            </div>

            <div class="form-group">
                <label>Repetir nueva contraseña</label>
                <input type="password" formControlName="confirmNewPassword" placeholder="Repetir contraseña" />
            </div>

            <div class="form-group">
                <label for="email">Email</label>
                <input id="email" type="email" formControlName="email" placeholder="correo@ejemplo.com" />
            </div>

            <div class="form-group">
                <label for="dni">DNI</label>
                <input id="dni" type="text" formControlName="dni" placeholder="Solo números" />
            </div>

            <div class="form-group">
                <label for="fechaNacimiento">Fecha de nacimiento</label>
                <input id="fechaNacimiento" type="date" formControlName="fechaNacimiento" />
            </div>

            <div class="acciones">
                <button class="btn-guardar" type="button" (click)="guardar()" [disabled]="saving()">
                    {{ saving() ? 'Guardando...' : 'Guardar Cambios' }}
                </button>

                <button class="btn-cancelar" type="button" (click)="cancelar()">
                    Cancelar
                </button>
            </div>

        </form>
    </div>
    }
</div>