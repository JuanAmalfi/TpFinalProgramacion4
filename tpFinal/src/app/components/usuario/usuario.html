<div class="auth-container">
  <form [formGroup]="form" (ngSubmit)="register()" class="login-form">
    <h2>Crear Cuenta</h2>

    @if (error) {
      <p class="error-message">{{ error }}</p>
    }

    <!-- USERNAME -->
    <div class="form-group">
      <label for="username">Usuario *</label>
      <input
        id="username"
        type="text"
        formControlName="username"
        placeholder="Ingresá tu nombre"
      />
      @if (form.get('username')?.touched && form.get('username')?.invalid) {
        <small class="error">Mínimo 4 caracteres</small>
      }
    </div>

    <!-- EMAIL -->
    <div class="form-group">
      <label for="email">Email *</label>
      <input
        id="email"
        type="email"
        formControlName="email"
        placeholder="Ingresá tu email"
      />
      @if (form.get('email')?.touched && form.get('email')?.invalid) {
        <small class="error">
          @if (form.get('email')?.errors?.['required']) {El email es obligatorio} 
          @else {Email inválido}
        </small>
      }
    </div>

    <!-- PASSWORD -->
    <div class="form-group">
      <label for="password">Contraseña *</label>
      <input
        id="password"
        type="password"
        formControlName="password"
        placeholder="Mínimo 6 caracteres"
      />
      @if (form.get('password')?.touched && form.get('password')?.invalid) {
        <small class="error">Mínimo 6 caracteres</small>
      }
    </div>

    <!-- DNI -->
    <div class="form-group">
      <label for="dni">DNI *</label>
      <input
        id="dni"
        type="text"
        formControlName="dni"
        placeholder="Solo números"
      />
      @if (form.get('dni')?.touched && form.get('dni')?.invalid) {
        <small class="error">DNI inválido (7 u 8 números)</small>
      }
    </div>

    <!-- FECHA DE NACIMIENTO -->
    <div class="form-group">
      <label for="fechaNacimiento">Fecha de nacimiento *</label>
      <input
        id="fechaNacimiento"
        type="date"
        formControlName="fechaNacimiento"
      />
      @if (form.get('fechaNacimiento')?.touched && form.get('fechaNacimiento')?.invalid) {
        <small class="error">La fecha es obligatoria</small>
      }
    </div>

    <!-- BOTÓN -->
    <button type="submit" [disabled]="form.invalid || loading" class="btn-login">
      {{ loading ? 'Creando...' : 'Crear Cuenta' }}
    </button>

    <!-- Enlace para volver a login -->
    <div class="register-link">
      <p>¿Ya tenés cuenta? 
        <span class="link-btn" (click)="goToLogin()">Iniciar sesión</span>
      </p>
    </div>
  </form>
</div>
