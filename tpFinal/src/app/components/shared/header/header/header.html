<header class="main-header">
  <div class="header-content">

    <!-- Logo -->
    <div class="logo">
      <a routerLink="/home"><span class="logo-text">LibrosApp</span></a>
    </div>

    <!-- Buscador -->
    <div class="search-container">
      <input type="text"
             placeholder="Buscar libros por titulo o autor..."
             (keyup)="buscar($event)"
             (keydown.enter)="irAResultados()">

      <button (click)="irAResultados()">ğŸ”</button>

      <!-- SUGERENCIAS -->
      @if (suggestions().length > 0) {
        <div class="suggestions-box">
          @for (s of suggestions(); track s.id) {
            <div class="suggestion-item" (click)="seleccionarResultado(s)">
              <strong>{{ s.titulo }}</strong>
              <small>de {{ s.autor }}</small>
            </div>
          }
        </div>
      }
    </div>

    <!-- App launcher (9 puntitos) -->
    <div class="apps-launcher">
      <button class="apps-btn" (click)="toggleApps()">
        <span class="dot"></span><span class="dot"></span>
        <span class="dot"></span><span class="dot"></span>
      </button>
    </div>

  </div>

  <!-- Panel flotante -->
  @if (appsOpen) {
    <div class="apps-overlay" (click)="toggleApps()"></div>

    <div class="apps-panel">
      <h3>MenÃº</h3>
      <div class="apps-grid">

        <a routerLink="/home" (click)="toggleApps()" class="app-item">ğŸ  Inicio</a>
        <a routerLink="/libro-list" (click)="toggleApps()" class="app-item">ğŸ“š Libros</a>

        @if (isUser()) {
          <a routerLink="/biblioteca" (click)="toggleApps()" class="app-item">ğŸ“– Biblioteca</a>
          <a routerLink="/carrito" (click)="toggleApps()" class="app-item">ğŸ›’ Carrito</a>
          <a routerLink="/facturas" (click)="toggleApps()" class="app-item">ğŸ“„ Mis Facturas</a>
        }

        @if (isAdmin()) {
          <a routerLink="/libro-form" (click)="toggleApps()" class="app-item">â• Libro</a>
          <a routerLink="/usuario-list" (click)="toggleApps()" class="app-item">ğŸ‘¥ Usuarios</a>
          <a routerLink="/facturas" (click)="toggleApps()" class="app-item">ğŸ“„ Facturas</a>
        }

        @if (!isLoggedIn()) {
          <a routerLink="/auth" (click)="toggleApps()" class="app-item">ğŸ” Login</a>
        }

        @if (isLoggedIn()) {
          <a (click)="goProfile(); toggleApps()" class="app-item">ğŸ‘¤ Mi Perfil</a>
          <a (click)="logout(); toggleApps()" class="app-item logout">ğŸšª Salir</a>
        }

      </div>
    </div>
  }
</header>
